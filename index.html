<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carnival Love Game</title>

<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: 'Baloo 2', cursive;
    background: #000;
  }

  /* BACKGROUND */
  .background {
    position: fixed;
    inset: 0;
    background: url("carnival.png") center 75% / cover no-repeat;
    animation: bgFloat 12s ease-in-out infinite alternate;
    z-index: -1;
  }

  @keyframes bgFloat {
    0%   { transform: scale(1.03) translateY(0px); }
    100% { transform: scale(1.06) translateY(-15px); }
  }

  .game {
    position: relative;
    width: 100%;
    height: 100%;
    transition: filter 0.6s ease;
  }

  .blurred {
    filter: blur(8px);
    pointer-events: none;
  }

  /* MUSIC BUTTON */
  .music-btn {
    position: fixed;
    top: 20px;
    left: 20px;
    width: 55px;
    height: 55px;
    border-radius: 50%;
    background: linear-gradient(145deg, #f5c86b, #f28db2);
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    cursor: pointer;
    box-shadow:
      inset 4px 4px 8px rgba(255,255,255,0.6),
      inset -4px -4px 8px rgba(0,0,0,0.2),
      0 6px 15px rgba(0,0,0,0.4);
    transition: transform 0.15s ease;
    z-index: 30;
  }

  .music-btn:active {
    transform: scale(0.85);
  }

  .music-btn.muted {
    position: relative;
  }

  .music-btn.muted::after {
    content: "";
    position: absolute;
    width: 40px;
    height: 3px;
    background: #3c4c6b;
    transform: rotate(-45deg);
    border-radius: 2px;
  }

  /* POPUP */
  .popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.85);
    width: 340px;
    padding: 30px;
    border-radius: 30px;
    background: linear-gradient(145deg, #3c4c6b, #7b4b5c);
    box-shadow: 0 30px 80px rgba(0,0,0,0.45);
    text-align: center;
    opacity: 0;
    z-index: 10;
    animation: popupEntrance 0.9s cubic-bezier(.2,.8,.2,1) forwards,
               popupFloat 4s ease-in-out infinite 1s;
  }

  @keyframes popupEntrance {
    0% { opacity: 0; transform: translate(-50%, -40%) scale(0.8); }
    100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  }

  @keyframes popupFloat {
    0%   { transform: translate(-50%, -50%) translateY(0px); }
    50%  { transform: translate(-50%, -50%) translateY(-8px); }
    100% { transform: translate(-50%, -50%) translateY(0px); }
  }

  .popup h2 {
    margin: 0 0 18px;
    font-size: 20px;
    color: #f5c86b;
  }

  .popup input {
    width: 90%;
    padding: 12px;
    border-radius: 999px;
    border: none;
    outline: none;
    text-align: center;
    margin-bottom: 16px;
    font-family: 'Baloo 2', cursive;
    font-size: 16px;
  }

  .popup button {
    padding: 12px 28px;
    border-radius: 999px;
    border: none;
    background: linear-gradient(135deg, #f28db2, #f5c86b);
    color: #3c4c6b;
    font-weight: 600;
    cursor: pointer;
    transition: 0.3s ease;
  }

  .popup button:hover {
    transform: scale(1.05);
  }

  /* CLOUD */
  .cloud {
    position: absolute;
    top: 12%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 30px 60px;
    border-radius: 80px;
    font-size: 30px;
    font-weight: 600;
    color: #7b4b5c;
    box-shadow:
      0 15px 40px rgba(0,0,0,0.25),
      -40px 20px 0 0 white,
      40px 20px 0 0 white,
      -60px 0 0 0 white,
      60px 0 0 0 white;
    opacity: 0;
    transition: opacity 1s ease;
  }

  @keyframes cloudFloat {
    0%   { transform: translateX(-50%) translateY(0px); }
    50%  { transform: translateX(-50%) translateY(-12px); }
    100% { transform: translateX(-50%) translateY(0px); }
  }

  .cloud.show {
    opacity: 1;
    animation: cloudFloat 5s ease-in-out infinite;
  }

  /* ORIENTATION LOCK */
  .orientation-lock {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    color: #f5c86b;
    display: none;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    font-size: 20px;
    z-index: 20;
  }

  .orientation-lock.active {
    display: flex;
  }

</style>
</head>

<body>

<div class="background"></div>

<div class="music-btn" id="musicBtn">ðŸŽµ</div>

<div class="game blurred" id="gameArea">
  <div class="cloud" id="welcomeCloud">Welcome</div>
</div>

<div class="popup" id="namePopup">
  <h2>Before we enter the carnival ðŸŽ¡<br>Tell me your name</h2>
  <input type="text" id="nameInput" placeholder="Your name">
  <br>
  <button onclick="submitName()">Enter</button>
</div>

<div class="orientation-lock" id="orientationWarning">
  Please turn on auto rotate and flip your phone horizontally.
</div>

<audio id="bgMusic" src="lobby.mp3" loop></audio>

<script>
  const music = document.getElementById("bgMusic");
  const musicBtn = document.getElementById("musicBtn");
  const popup = document.getElementById("namePopup");
  const cloud = document.getElementById("welcomeCloud");
  const input = document.getElementById("nameInput");
  const gameArea = document.getElementById("gameArea");
  const orientationWarning = document.getElementById("orientationWarning");

  let isMuted = true;

  music.volume = 0.5;

  musicBtn.addEventListener("click", () => {
    if (isMuted) {
      music.play();
      musicBtn.classList.remove("muted");
      isMuted = false;
    } else {
      music.pause();
      musicBtn.classList.add("muted");
      isMuted = true;
    }
  });

  musicBtn.classList.add("muted");

  function checkOrientation() {
    if (window.innerHeight > window.innerWidth) {
      orientationWarning.classList.add("active");
    } else {
      orientationWarning.classList.remove("active");
    }
  }

  window.addEventListener("resize", checkOrientation);
  window.addEventListener("load", checkOrientation);

  function submitName() {
    let name = input.value.trim();
    if (name === "") name = "Guest";

    popup.style.opacity = "0";
    popup.style.transition = "opacity 0.6s ease";

    setTimeout(() => {
      popup.style.display = "none";
      gameArea.classList.remove("blurred");

      cloud.innerText = "Welcome " + name;
      cloud.classList.add("show");
    }, 600);
  }
</script>

</body>
</html>